import{d as e,x as l,z as a,m as t,h as o,y as n,p as s,f as u,a as i,o as d,c,b as p,A as r,B as v,F as h,w as f,e as m}from"./vendor.9e8f1dbe.js";var g,y;(y=g||(g={}))[y.PEN=1]="PEN",y[y.RECT=2]="RECT",y[y.ARC=3]="ARC",y[y.ERASER=4]="ERASER";var C=e({name:"Demo2",setup:()=>{let e,s=!1,u=null,i=0,d=0;const c=l(null),p=l(1),r=l("#000000"),v=l(0),h=a({width:0,top:0,left:0}),f=t(g),m=l(!1);o((()=>v.value),(()=>{h.width=v.value})),n((()=>{y(),C()}));const y=()=>{var l;e=null==(l=c.value)?void 0:l.getContext("2d"),e.fillStyle="#ffffff",e.fillRect(0,0,800,600),v.value=5,e.lineCap="round"},C=()=>{c.value.onmousedown=l=>{var a;s=!0;const t=null==(a=c.value)?void 0:a.getBoundingClientRect(),o=l.pageX-t.left,n=l.pageY-t.top;i=o,d=n,e.beginPath(),1===p.value&&e.moveTo(o,n)},document.onmouseup=()=>{s=!1,e.closePath(),u=e.getImageData(0,0,800,600)},c.value.onmouseout=()=>{s=!1,e.closePath(),u=e.getImageData(0,0,800,600),m.value=!1},c.value.onmouseenter=()=>{m.value=!0},c.value.onmousemove=e=>{var l;const a=null==(l=c.value)?void 0:l.getBoundingClientRect(),t=e.pageX-a.left,o=e.pageY-a.top;h.left=e.pageX-h.width/2-2,h.top=e.pageY-h.width/2-2,s&&(1===p.value&&R(t,o),2===p.value&&k(t,o),3===p.value&&w(t,o),4===p.value&&R(t,o,"#ffffff"))}},R=(l,a,t)=>{e.lineWidth=v.value,e.strokeStyle=t||r.value,e.lineTo(l,a),e.stroke()},k=(l,a)=>{e.clearRect(0,0,800,600),u&&e.putImageData(u,0,0,0,0,800,600),e.beginPath(),e.lineWidth=v.value,e.strokeStyle=r.value,e.strokeRect(i,d,l-i,a-d),e.closePath()},w=(l,a)=>{e.clearRect(0,0,800,600),u&&e.putImageData(u,0,0,0,0,800,600),e.beginPath(),e.lineWidth=v.value,e.strokeStyle=r.value;const t=Math.sqrt(Math.pow(Math.abs(l-i),2)+Math.pow(Math.abs(a-d),2))/2;e.arc(i+(l-i)/2,d+(a-d)/2,t,0,2*Math.PI),e.stroke(),e.closePath()};return{canvas:c,type:p,color:r,lineWidth:v,BrushType:f,showPoint:m,point:h,clear:()=>{e.clearRect(0,0,800,600),u=null},save:()=>{var e;const l=null==(e=c.value)?void 0:e.toDataURL(),a=document.createElement("a");a.download="myWriting",a.href=l||"",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}}});const R=f();s("data-v-f3f1843c");const k={class:"content"},w={class:"tools"},E=m("画笔"),P=m("矩形"),b=m("圆形"),T=p("span",null,"颜色",-1),x=p("span",null,"粗细",-1),B=m("橡皮擦"),_=m("清空"),A=m("保存"),S={ref:"canvas",class:"canvas",width:"800",height:"600"};u();const W=R(((e,l,a,t,o,n)=>{const s=i("el-button"),u=i("el-color-picker"),f=i("el-slider");return d(),c(h,null,[p("div",k,[p("div",w,[p("div",null,[p(s,{type:"success",onClick:l[1]||(l[1]=l=>e.type=e.BrushType.PEN)},{default:R((()=>[E])),_:1}),p(s,{type:"warning",onClick:l[2]||(l[2]=l=>e.type=e.BrushType.RECT)},{default:R((()=>[P])),_:1}),p(s,{type:"danger",onClick:l[3]||(l[3]=l=>e.type=e.BrushType.ARC)},{default:R((()=>[b])),_:1}),T,p(u,{modelValue:e.color,"onUpdate:modelValue":l[4]||(l[4]=l=>e.color=l)},null,8,["modelValue"]),x,p(f,{modelValue:e.lineWidth,"onUpdate:modelValue":l[5]||(l[5]=l=>e.lineWidth=l),min:1,max:50,class:"slider"},null,8,["modelValue"]),p(s,{type:"info",onClick:l[6]||(l[6]=l=>e.type=e.BrushType.ERASER)},{default:R((()=>[B])),_:1})]),p("div",null,[p(s,{onClick:e.clear},{default:R((()=>[_])),_:1},8,["onClick"]),p(s,{type:"primary",onClick:e.save},{default:R((()=>[A])),_:1},8,["onClick"])])]),p("canvas",S,null,512)]),r(p("div",{style:{width:e.point.width+"px",height:e.point.width+"px",top:e.point.top+"px",left:e.point.left+"px"},class:"point"},null,4),[[v,e.showPoint]])],64)}));C.render=W,C.__scopeId="data-v-f3f1843c";export{C as default};
