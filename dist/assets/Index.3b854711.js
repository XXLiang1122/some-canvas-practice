import{d as e,x as a,z as l,m as t,h as o,y as n,p as s,a as u,f as i,o as d,c,b as p,A as r,B as v,F as h,w as f,g as m}from"./vendor.362eff53.js";var g,y;(y=g||(g={}))[y.PEN=1]="PEN",y[y.RECT=2]="RECT",y[y.ARC=3]="ARC",y[y.ERASER=4]="ERASER";var R=e({name:"Demo2",setup:()=>{let e,s=!1,u=null,i=0,d=0;const c=a(null),p=a(1),r=a("#000000"),v=a(0),h=l({width:0,top:0,left:0}),f=t(g),m=a(!1);o((()=>v.value),(()=>{h.width=v.value})),n((()=>{y(),R()}));const y=()=>{var a;e=null==(a=c.value)?void 0:a.getContext("2d"),e.fillStyle="#ffffff",e.fillRect(0,0,800,600),v.value=5},R=()=>{c.value.onmousedown=a=>{var l;s=!0;const t=null==(l=c.value)?void 0:l.getBoundingClientRect(),o=a.pageX-t.left,n=a.pageY-t.top;i=o,d=n,e.beginPath(),1===p.value&&e.moveTo(o,n)},document.onmouseup=()=>{s=!1,e.closePath(),u=e.getImageData(0,0,800,600)},c.value.onmouseout=()=>{s=!1,e.closePath(),u=e.getImageData(0,0,800,600),m.value=!1},c.value.onmouseenter=()=>{m.value=!0},c.value.onmousemove=e=>{var a;const l=null==(a=c.value)?void 0:a.getBoundingClientRect(),t=e.pageX-l.left,o=e.pageY-l.top;h.left=e.pageX-h.width/2-2,h.top=e.pageY-h.width/2-2,s&&(1===p.value&&C(t,o),2===p.value&&k(t,o),3===p.value&&w(t,o),4===p.value&&C(t,o,"#ffffff"))}},C=(a,l,t)=>{e.lineWidth=v.value,e.strokeStyle=t||r.value,e.lineTo(a,l),e.stroke()},k=(a,l)=>{e.clearRect(0,0,800,600),u&&e.putImageData(u,0,0,0,0,800,600),e.beginPath(),e.lineWidth=v.value,e.strokeStyle=r.value,e.strokeRect(i,d,a-i,l-d),e.closePath()},w=(a,l)=>{e.clearRect(0,0,800,600),u&&e.putImageData(u,0,0,0,0,800,600),e.beginPath(),e.lineWidth=v.value,e.strokeStyle=r.value;const t=Math.sqrt(Math.pow(Math.abs(a-i),2)+Math.pow(Math.abs(l-d),2))/2;e.arc(i+(a-i)/2,d+(l-d)/2,t,0,2*Math.PI),e.stroke(),e.closePath()};return{canvas:c,type:p,color:r,lineWidth:v,BrushType:f,showPoint:m,point:h,clear:()=>{e.clearRect(0,0,800,600),u=null},save:()=>{var e;const a=null==(e=c.value)?void 0:e.toDataURL(),l=document.createElement("a");l.download="myWriting",l.href=a||"",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}}});const C=f();s("data-v-22fa2e90");const k={class:"content"},w={class:"tools"},E=m("画笔"),P=m("矩形"),T=m("圆形"),b=p("span",null,"颜色",-1),x=p("span",null,"粗细",-1),B=m("橡皮擦"),_=m("清空"),A=m("保存"),S={ref:"canvas",class:"canvas",width:"800",height:"600"};u();const W=C(((e,a,l,t,o,n)=>{const s=i("el-button"),u=i("el-color-picker"),f=i("el-slider");return d(),c(h,null,[p("div",k,[p("div",w,[p("div",null,[p(s,{type:"success",onClick:a[1]||(a[1]=a=>e.type=e.BrushType.PEN)},{default:C((()=>[E])),_:1}),p(s,{type:"warning",onClick:a[2]||(a[2]=a=>e.type=e.BrushType.RECT)},{default:C((()=>[P])),_:1}),p(s,{type:"danger",onClick:a[3]||(a[3]=a=>e.type=e.BrushType.ARC)},{default:C((()=>[T])),_:1}),b,p(u,{modelValue:e.color,"onUpdate:modelValue":a[4]||(a[4]=a=>e.color=a)},null,8,["modelValue"]),x,p(f,{modelValue:e.lineWidth,"onUpdate:modelValue":a[5]||(a[5]=a=>e.lineWidth=a),min:1,max:50,class:"slider"},null,8,["modelValue"]),p(s,{type:"info",onClick:a[6]||(a[6]=a=>e.type=e.BrushType.ERASER)},{default:C((()=>[B])),_:1})]),p("div",null,[p(s,{onClick:e.clear},{default:C((()=>[_])),_:1},8,["onClick"]),p(s,{type:"primary",onClick:e.save},{default:C((()=>[A])),_:1},8,["onClick"])])]),p("canvas",S,null,512)]),r(p("div",{style:{width:e.point.width+"px",height:e.point.width+"px",top:e.point.top+"px",left:e.point.left+"px"},class:"point"},null,4),[[v,e.showPoint]])],64)}));R.render=W,R.__scopeId="data-v-22fa2e90";export{R as default};
