import{d as e,x as t,y as i,C as n,p as o,f as r,a,o as l,c as s,b as c,t as d,w as f,e as u}from"./vendor.9e8f1dbe.js";var v,y;(y=v||(v={})).L="left",y.R="right",y.T="top",y.B="bottom";class x{constructor(e,t,i){this.x=e,this.y=t,this.direction=i}}var h=e({name:"Demo6",setup:()=>{const e=t(null),o=t(0);let r,a=[];const l=10,s=[];let c,d,f;i((()=>{u(),y(),m()})),n((()=>{clearInterval(c)}));const u=()=>{var t;r=null==(t=e.value)?void 0:t.getContext("2d")},y=()=>{k(),f=null,o.value=0,d=new x(0,0,v.R),s.length=0,clearInterval(c),c=setInterval((()=>{h()}),50)},h=()=>{r.clearRect(0,0,800,600),r.fillStyle="#000",r.fillRect(0,0,800,600),r.fillStyle="#fff",a.forEach(((e,t)=>{p(e,t===a.length-1),b(e),r.beginPath(),r.fillRect(e.x,e.y,10,10),r.fill()})),R(a[0]),w(),g()},p=(e,t)=>{s.length&&s.forEach((i=>{e.x===i.x&&e.y===i.y&&(e.direction=i.direction,t&&s.splice(0,1))}))},b=e=>{switch(e.direction){case v.L:e.x-=l;break;case v.R:e.x+=l;break;case v.T:e.y-=l;break;case v.B:e.y+=l}},w=()=>{if(f)return void r.fillRect(f.x,f.y,10,10);const e={x:10*+(790*Math.random()/10).toFixed(0),y:10*+(590*Math.random()/10).toFixed(0)};a.findIndex((t=>t.x===e.x&&t.y===e.y))>-1?w():f=e},g=()=>{if(a[0].x===(null==f?void 0:f.x)&&a[0].y===(null==f?void 0:f.y)){const e=JSON.parse(JSON.stringify(a[a.length-1]));switch(e.direction){case v.L:e.x+=l;break;case v.R:e.x-=l;break;case v.T:e.y+=l;break;case v.B:e.y-=l}a.push(new x(e.x,e.y,e.direction)),f=null,o.value++}},R=e=>{(e.x<0||e.x>=800||e.y<0||e.y>=600)&&(alert("oooops!"),y())},k=()=>{a=[];for(let e=5;e>0;e--)a.push(new x(10*e,100,v.R))},m=()=>{document.onkeydown=e=>{const t=JSON.parse(JSON.stringify(a[0]));let i=!1;switch(e.code){case"ArrowLeft":t.direction=v.L,i=!0;break;case"ArrowRight":t.direction=v.R,i=!0;break;case"ArrowUp":t.direction=v.T,i=!0;break;case"ArrowDown":t.direction=v.B,i=!0}i&&(S(d,t)||L(d,t)||B(d,t)||(s.push(t),d=JSON.parse(JSON.stringify(t))))}},S=(e,t)=>t.x===(null==e?void 0:e.x)&&t.y===(null==e?void 0:e.y),L=(e,t)=>t.direction===(null==e?void 0:e.direction),B=(e,t)=>t.direction===v.L&&(null==e?void 0:e.direction)===v.R||t.direction===v.R&&(null==e?void 0:e.direction)===v.L||t.direction===v.T&&(null==e?void 0:e.direction)===v.B||t.direction===v.B&&(null==e?void 0:e.direction)===v.T;return{canvas:e,score:o,reset:y}}});const p=f();o("data-v-4f5952f9");const b={class:"content"},w=u("重玩"),g={ref:"canvas",class:"canvas",width:"800",height:"600"};r();const R=p(((e,t,i,n,o,r)=>{const f=a("el-button");return l(),s("div",b,[c("div",null,[c(f,{type:"primary",onClick:e.reset,style:{float:"right"}},{default:p((()=>[w])),_:1},8,["onClick"]),c("span",null,"得分："+d(e.score),1)]),c("canvas",g,null,512)])}));h.render=R,h.__scopeId="data-v-4f5952f9";export{h as default};
